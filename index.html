<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Football Story Pack ‚Äî Editor</title>
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;700;900&family=Bebas+Neue&family=Orbitron:wght@500;700;900&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
:root{
  --ui-bg:#070D1A;--ui-panel:#0D1628;--ui-border:rgba(99,179,255,0.14);
  --ui-accent:#3B82F6;--ui-text:#CBD5E1;--ui-muted:#4A6080;
  --neon:#00F0FF;--neon2:#0099FF;
}
html,body{height:100%;}
body{background:var(--ui-bg);color:var(--ui-text);font-family:'Inter',sans-serif;font-size:14px;display:flex;flex-direction:column;min-height:100vh;}

/* TOP BAR */
.topbar{background:rgba(13,22,40,0.97);border-bottom:1px solid var(--ui-border);padding:0 16px;height:54px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(12px);}
.topbar-logo{font-family:'Orbitron',sans-serif;font-size:0.8rem;font-weight:900;color:var(--neon);letter-spacing:4px;text-shadow:0 0 16px rgba(0,240,255,0.4);white-space:nowrap;}
.topbar-tabs{display:flex;gap:3px;background:rgba(0,0,0,0.3);border-radius:10px;padding:4px;overflow-x:auto;}
.tab-btn{background:none;border:none;color:var(--ui-muted);font-family:'Orbitron',sans-serif;font-size:0.52rem;letter-spacing:1.5px;padding:6px 12px;border-radius:7px;cursor:pointer;transition:all 0.2s;text-transform:uppercase;white-space:nowrap;}
.tab-btn.active{background:var(--ui-accent);color:#fff;box-shadow:0 0 14px rgba(59,130,246,0.4);}
.topbar-actions{display:flex;gap:8px;flex-shrink:0;}
.btn-download{background:linear-gradient(135deg,var(--neon2),var(--neon));border:none;color:#020B18;font-family:'Orbitron',sans-serif;font-size:0.55rem;font-weight:700;letter-spacing:2px;padding:8px 18px;border-radius:8px;cursor:pointer;text-transform:uppercase;box-shadow:0 0 20px rgba(0,240,255,0.3);transition:all 0.2s;white-space:nowrap;}
.btn-download:hover{transform:translateY(-1px);box-shadow:0 0 30px rgba(0,240,255,0.5);}

/* LAYOUT */
.main{display:flex;flex:1;overflow:hidden;}

/* SIDEBAR */
.sidebar{width:290px;flex-shrink:0;background:var(--ui-panel);border-right:1px solid var(--ui-border);overflow-y:auto;padding:16px 14px;display:flex;flex-direction:column;gap:5px;}
.sidebar::-webkit-scrollbar{width:3px;}.sidebar::-webkit-scrollbar-thumb{background:rgba(99,179,255,0.2);border-radius:2px;}
.section-label{font-family:'Orbitron',sans-serif;font-size:0.5rem;letter-spacing:4px;color:var(--neon);text-transform:uppercase;padding:10px 4px 4px;border-top:1px solid var(--ui-border);margin-top:4px;}
.section-label:first-of-type{border-top:none;margin-top:0;}
.field-row{display:flex;flex-direction:column;gap:3px;}
.field-row label{font-size:0.65rem;color:var(--ui-muted);letter-spacing:1px;text-transform:uppercase;padding-left:2px;}
.field-row input[type="text"],.field-row input[type="number"]{background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:7px;color:var(--ui-text);font-family:'Inter',sans-serif;font-size:0.82rem;padding:8px 10px;outline:none;transition:border-color 0.2s;width:100%;}
.field-row input:focus{border-color:var(--ui-accent);}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:7px;}
.score-row{display:grid;grid-template-columns:1fr 30px 1fr;align-items:end;gap:6px;}
.score-sep-lbl{text-align:center;font-family:'Bebas Neue',sans-serif;font-size:1.3rem;color:var(--ui-muted);line-height:1;padding-bottom:7px;}
.color-row{display:grid;grid-template-columns:1fr 1fr;gap:7px;}
.color-field{display:flex;flex-direction:column;gap:3px;}
.color-field label{font-size:0.63rem;color:var(--ui-muted);letter-spacing:1px;}
.color-field input[type="color"]{width:100%;height:36px;border:1px solid var(--ui-border);border-radius:7px;background:rgba(0,0,0,0.4);cursor:pointer;padding:3px;}
.format-toggle{display:grid;grid-template-columns:1fr 1fr;gap:6px;}
.fmt-btn{background:rgba(0,0,0,0.3);border:1px solid var(--ui-border);border-radius:8px;color:var(--ui-muted);font-family:'Orbitron',sans-serif;font-size:0.52rem;letter-spacing:2px;padding:9px 6px;cursor:pointer;text-align:center;transition:all 0.2s;text-transform:uppercase;}
.fmt-btn.active{background:rgba(59,130,246,0.15);border-color:var(--ui-accent);color:#fff;}
.fmt-btn .fmt-icon{font-size:1.1rem;display:block;margin-bottom:3px;}
.scorer-list{display:flex;flex-direction:column;gap:5px;}
.scorer-entry{display:grid;grid-template-columns:1fr 46px 46px 26px;gap:5px;align-items:center;}
.scorer-entry input[type="text"],.scorer-entry input[type="number"]{background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.78rem;padding:6px 7px;outline:none;width:100%;}
.scorer-entry select{background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.72rem;padding:6px 3px;outline:none;cursor:pointer;}
.btn-rm{background:rgba(255,51,85,0.1);border:1px solid rgba(255,51,85,0.25);border-radius:6px;color:#FF3355;font-size:0.9rem;cursor:pointer;height:30px;display:flex;align-items:center;justify-content:center;}
.btn-add{background:rgba(0,240,255,0.05);border:1px dashed rgba(0,240,255,0.22);border-radius:7px;color:var(--neon);font-family:'Orbitron',sans-serif;font-size:0.52rem;letter-spacing:2px;padding:8px;cursor:pointer;text-align:center;text-transform:uppercase;margin-top:2px;}
.motm-stats-grid-edit{display:grid;grid-template-columns:1fr 1fr 1fr;gap:5px;}
.motm-stat-edit{display:flex;flex-direction:column;gap:3px;}
.motm-stat-edit label{font-size:0.58rem;color:var(--ui-muted);letter-spacing:1px;}
.motm-stat-edit input{background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.82rem;padding:6px 7px;outline:none;text-align:center;}
.rating-slider-wrap{display:flex;align-items:center;gap:10px;}
.rating-slider-wrap input[type="range"]{flex:1;accent-color:var(--neon);height:4px;}
.rating-val-lbl{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;color:var(--neon);min-width:34px;text-align:right;}

/* CANVAS */
.canvas-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:28px 20px;overflow-y:auto;background:radial-gradient(ellipse 60% 40% at 50% 10%,rgba(0,80,200,0.06) 0%,transparent 60%),repeating-linear-gradient(0deg,transparent,transparent 40px,rgba(255,255,255,0.012) 40px,rgba(255,255,255,0.012) 41px),repeating-linear-gradient(90deg,transparent,transparent 40px,rgba(255,255,255,0.012) 40px,rgba(255,255,255,0.012) 41px);}
.preview-wrapper{display:flex;flex-direction:column;align-items:center;gap:12px;}
.preview-label{font-family:'Orbitron',sans-serif;font-size:0.52rem;letter-spacing:4px;color:var(--neon);text-transform:uppercase;border:1px solid var(--ui-border);padding:4px 14px;border-radius:20px;}
#preview-frame{position:relative;overflow:hidden;transition:width 0.35s cubic-bezier(.4,0,.2,1),height 0.35s cubic-bezier(.4,0,.2,1),border-radius 0.35s;box-shadow:0 0 0 1px rgba(0,240,255,0.15),0 0 50px rgba(0,100,255,0.15);}
#preview-frame.story-format{width:340px;height:604px;border-radius:18px;}
#preview-frame.post-format{width:480px;height:480px;border-radius:14px;}

/* SHARED INSIDE FRAME */
.pf-bg{position:absolute;inset:0;transition:background 0.4s;}
.pf-noise{position:absolute;inset:0;opacity:0.04;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");background-size:200px;pointer-events:none;}
.pf-scanlines{position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(0,240,255,0.01) 3px,rgba(0,240,255,0.01) 4px);pointer-events:none;}
.pf-corners .c{position:absolute;width:15px;height:15px;}
.pf-corners .c.tl{top:10px;left:10px;border-top:2px solid;border-left:2px solid;}
.pf-corners .c.tr{top:10px;right:10px;border-top:2px solid;border-right:2px solid;}
.pf-corners .c.bl{bottom:10px;left:10px;border-bottom:2px solid;border-left:2px solid;}
.pf-corners .c.br{bottom:10px;right:10px;border-bottom:2px solid;border-right:2px solid;}
.pf-watermark{position:absolute;bottom:12px;left:50%;transform:translateX(-50%);font-family:'Orbitron',sans-serif;font-size:0.48rem;letter-spacing:5px;color:rgba(255,255,255,0.12);white-space:nowrap;z-index:5;}
.slide-hidden{display:none!important;}

/* ‚îÄ‚îÄ RESULT ‚îÄ‚îÄ */
.slide-result{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;}
.res-top{display:flex;justify-content:space-between;align-items:flex-start;padding:18px 18px 0;z-index:2;position:relative;}
.res-tourn-name{font-family:'Orbitron',sans-serif;font-size:0.54rem;letter-spacing:3px;}
.res-round{font-size:0.6rem;color:rgba(255,255,255,0.4);letter-spacing:2px;margin-top:2px;}
.res-ft-pill{font-family:'Orbitron',sans-serif;font-size:0.56rem;font-weight:700;letter-spacing:2px;padding:5px 12px;border-radius:4px;}
.res-teams{display:flex;align-items:center;justify-content:center;padding:18px 8px 0;gap:2px;z-index:2;position:relative;}
.res-team-col{flex:1;display:flex;flex-direction:column;align-items:center;gap:8px;}
.res-team-name{font-family:'Bebas Neue',sans-serif;font-size:0.95rem;letter-spacing:3px;text-align:center;}
.res-team-city{font-size:0.58rem;letter-spacing:2px;text-align:center;color:rgba(255,255,255,0.38);margin-top:-7px;}
.res-score{font-family:'Bebas Neue',sans-serif;font-size:5rem;line-height:1;letter-spacing:-4px;flex-shrink:0;}
.res-divider{width:82%;height:1px;margin:14px auto 0;z-index:2;position:relative;}
.res-stats{display:flex;justify-content:space-around;padding:10px 20px 0;z-index:2;position:relative;}
.res-stat{text-align:center;}
.res-stat .rv{font-family:'Bebas Neue',sans-serif;font-size:1.4rem;line-height:1;}
.res-stat .rl{font-size:0.55rem;letter-spacing:2px;color:rgba(255,255,255,0.38);text-transform:uppercase;}
.res-scorers{padding:10px 18px 0;z-index:2;position:relative;border-top:1px solid rgba(255,255,255,0.06);margin:10px 18px 0;}
.res-scorers-title{font-family:'Orbitron',sans-serif;font-size:0.48rem;letter-spacing:4px;margin-bottom:7px;}
.res-goal-entry{display:flex;align-items:center;gap:7px;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.04);font-size:0.8rem;}
.res-goal-entry .gname{flex:1;font-weight:700;letter-spacing:1px;}
.res-goal-entry .gtag{font-size:0.56rem;padding:2px 6px;border-radius:3px;}
.res-goal-entry .gmin{font-size:0.65rem;color:rgba(255,255,255,0.38);min-width:24px;text-align:right;}

/* ‚îÄ‚îÄ STANDINGS (3 teams) ‚îÄ‚îÄ */
.slide-standings{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;}
.std-hdr-p{padding:20px 18px 0;display:flex;justify-content:space-between;align-items:flex-end;z-index:2;position:relative;}
.std-eyebrow-p{font-family:'Orbitron',sans-serif;font-size:0.54rem;letter-spacing:3px;}
.std-title-p{font-family:'Bebas Neue',sans-serif;font-size:2.2rem;letter-spacing:5px;line-height:1;}
.std-subtitle-p{font-size:0.6rem;color:rgba(255,255,255,0.38);letter-spacing:2px;margin-top:2px;}
.std-trophy{font-size:2.4rem;}
.std-col-head{display:grid;grid-template-columns:22px 1fr 26px 26px 26px 26px 34px;padding:12px 14px 8px;font-size:0.54rem;color:rgba(255,255,255,0.36);letter-spacing:2px;border-bottom:1px solid rgba(255,255,255,0.07);z-index:2;position:relative;}
.std-col-head>div{text-align:center;}
.std-col-head>div:nth-child(2){text-align:left;padding-left:6px;}
.std-rows-p{position:relative;padding:6px 14px 0;z-index:2;}
.std-row-p{display:grid;grid-template-columns:22px 1fr 26px 26px 26px 26px 34px;align-items:center;padding:16px 0;border-bottom:1px solid rgba(255,255,255,0.04);font-size:0.82rem;font-weight:600;position:relative;}
.std-row-p>div{text-align:center;}
.std-pos-p{font-family:'Bebas Neue',sans-serif;font-size:1rem;color:rgba(255,255,255,0.42);}
.std-name-p{text-align:left!important;padding-left:4px;font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:0.9rem;letter-spacing:1px;}
.std-col-p{color:rgba(255,255,255,0.42);font-size:0.78rem;}
.std-pts-p{font-family:'Bebas Neue',sans-serif;font-size:1.05rem;}
.std-zone-bar{position:absolute;left:-4px;top:0;bottom:0;width:3px;border-radius:2px;}
.std-legend-p{display:flex;gap:14px;padding:14px 14px 0;z-index:2;position:relative;}
.std-leg{display:flex;align-items:center;gap:5px;font-size:0.58rem;color:rgba(255,255,255,0.38);letter-spacing:1px;}
.std-leg .lb{width:9px;height:9px;border-radius:2px;}

/* ‚îÄ‚îÄ FIXTURES ‚îÄ‚îÄ */
.slide-fixtures{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;}
.fix-hdr{padding:20px 18px 0;z-index:2;position:relative;}
.fix-eyebrow-p{font-family:'Orbitron',sans-serif;font-size:0.54rem;letter-spacing:4px;display:flex;align-items:center;gap:8px;margin-bottom:2px;}
.fix-eyebrow-p::after{content:'';flex:1;height:1px;background:rgba(0,240,255,0.2);}
.fix-big-title{font-family:'Bebas Neue',sans-serif;font-size:2.6rem;letter-spacing:7px;line-height:1;}
.fix-subtitle-p{font-size:0.62rem;color:rgba(255,255,255,0.38);letter-spacing:2px;margin-top:2px;}
.fix-body-list{padding:10px 12px 0;display:flex;flex-direction:column;gap:8px;z-index:2;position:relative;flex:1;}
.fix-card-p{border-radius:9px;padding:11px 12px;display:flex;align-items:center;gap:9px;position:relative;overflow:hidden;}
.fix-date-col{display:flex;flex-direction:column;align-items:center;min-width:28px;}
.fix-date-col .fd{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;line-height:1;}
.fix-date-col .fm{font-size:0.54rem;color:rgba(255,255,255,0.38);letter-spacing:1px;}
.fix-vsep{width:1px;height:28px;background:rgba(255,255,255,0.1);}
.fix-info{flex:1;}
.fix-matchup-lbl{font-family:'Bebas Neue',sans-serif;font-size:0.92rem;letter-spacing:2px;}
.fix-venue-lbl{font-size:0.58rem;color:rgba(255,255,255,0.36);letter-spacing:1px;margin-top:1px;}
.fix-time-lbl{font-family:'Orbitron',sans-serif;font-size:0.76rem;font-weight:700;letter-spacing:1px;}
.fix-live-badge{font-family:'Orbitron',sans-serif;font-size:0.4rem;font-weight:700;letter-spacing:2px;padding:2px 5px;border-radius:3px;margin-top:3px;text-align:center;animation:blink 1.3s infinite;}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.3}}

/* ‚îÄ‚îÄ SEMI-FINAL ‚îÄ‚îÄ */
.slide-semifinal{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;}
.ko-header{padding:18px 18px 0;z-index:2;position:relative;text-align:center;}
.ko-stage-badge{display:inline-block;font-family:'Orbitron',sans-serif;font-size:0.58rem;letter-spacing:5px;padding:5px 18px;border-radius:4px;margin-bottom:8px;}
.ko-main-title{font-family:'Bebas Neue',sans-serif;font-size:2.2rem;letter-spacing:7px;line-height:1;}
.ko-sub{font-size:0.6rem;color:rgba(255,255,255,0.38);letter-spacing:3px;margin-top:3px;}
.ko-matches-wrap{z-index:2;position:relative;padding:16px 12px 0;display:flex;flex-direction:column;gap:12px;flex:1;}
.ko-match-card{border-radius:12px;padding:14px 14px;position:relative;overflow:hidden;}
.ko-match-num{font-family:'Orbitron',sans-serif;font-size:0.46rem;letter-spacing:3px;color:rgba(255,255,255,0.35);margin-bottom:10px;}
.ko-teams-row{display:flex;align-items:center;gap:6px;}
.ko-team-blk{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;}
.ko-team-nm{font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:3px;text-align:center;}
.ko-score-blk{display:flex;flex-direction:column;align-items:center;gap:2px;flex-shrink:0;padding:0 6px;}
.ko-score-big{font-family:'Bebas Neue',sans-serif;font-size:3.2rem;line-height:1;letter-spacing:-3px;}
.ko-score-label{font-size:0.48rem;letter-spacing:2px;color:rgba(255,255,255,0.3);text-transform:uppercase;}
.ko-pens{font-family:'Orbitron',sans-serif;font-size:0.5rem;letter-spacing:1px;margin-top:5px;padding:3px 10px;border-radius:3px;background:rgba(255,255,255,0.06);text-align:center;border:1px solid rgba(255,255,255,0.1);}
.ko-match-info{display:flex;justify-content:center;margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,255,255,0.06);}
.ko-info-chip{font-size:0.56rem;color:rgba(255,255,255,0.32);letter-spacing:1px;}
.ko-divider-lbl{z-index:2;position:relative;text-align:center;padding:2px 0;}
.ko-divider-lbl span{font-family:'Orbitron',sans-serif;font-size:0.48rem;letter-spacing:4px;color:rgba(255,255,255,0.22);background:transparent;padding:0 10px;}

/* ‚îÄ‚îÄ FINAL ‚îÄ‚îÄ */
.slide-final{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;align-items:center;}
.final-bg-glow{position:absolute;width:100%;height:60%;top:15%;z-index:0;pointer-events:none;}
.final-header{position:relative;z-index:2;text-align:center;padding:18px 18px 0;width:100%;}
.final-crown{font-size:2rem;margin-bottom:4px;}
.final-stage-badge{display:inline-block;font-family:'Orbitron',sans-serif;font-size:0.6rem;letter-spacing:5px;padding:5px 20px;border-radius:4px;margin-bottom:6px;}
.final-title{font-family:'Bebas Neue',sans-serif;font-size:2.6rem;letter-spacing:9px;line-height:1;}
.final-subtitle{font-size:0.6rem;color:rgba(255,255,255,0.38);letter-spacing:3px;margin-top:3px;}
.final-teams{position:relative;z-index:2;display:flex;align-items:center;justify-content:center;padding:18px 10px 0;gap:4px;width:100%;}
.final-team-col{flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;}
.final-team-nm{font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:3px;text-align:center;}
.final-team-city{font-size:0.56rem;letter-spacing:2px;color:rgba(255,255,255,0.38);text-align:center;margin-top:-5px;}
.final-score-center{display:flex;flex-direction:column;align-items:center;gap:2px;flex-shrink:0;}
.final-score-big{font-family:'Bebas Neue',sans-serif;font-size:5rem;line-height:1;letter-spacing:-5px;}
.final-score-ft{font-size:0.5rem;letter-spacing:3px;color:rgba(255,255,255,0.36);text-transform:uppercase;}
.final-divider{width:80%;height:1px;margin:12px auto 0;position:relative;z-index:2;}
.final-winner-section{position:relative;z-index:2;text-align:center;padding:12px 18px 0;}
.final-winner-label{font-family:'Orbitron',sans-serif;font-size:0.48rem;letter-spacing:5px;color:rgba(255,255,255,0.36);margin-bottom:3px;}
.final-winner-name{font-family:'Bebas Neue',sans-serif;font-size:1.9rem;letter-spacing:6px;line-height:1;}
.final-pens{font-family:'Orbitron',sans-serif;font-size:0.52rem;letter-spacing:2px;padding:3px 12px;border-radius:3px;background:rgba(255,255,255,0.06);display:inline-block;margin-top:5px;border:1px solid rgba(255,255,255,0.1);}
.final-scorers{padding:10px 18px 0;position:relative;z-index:2;border-top:1px solid rgba(255,255,255,0.06);margin:10px 18px 0;width:calc(100% - 36px);}
.final-scorers-title{font-family:'Orbitron',sans-serif;font-size:0.46rem;letter-spacing:4px;margin-bottom:6px;}
.final-goal-entry{display:flex;align-items:center;gap:7px;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.04);font-size:0.78rem;}
.final-goal-entry .gname{flex:1;font-weight:700;letter-spacing:1px;}
.final-goal-entry .gtag{font-size:0.54rem;padding:2px 6px;border-radius:3px;}
.final-goal-entry .gmin{font-size:0.62rem;color:rgba(255,255,255,0.38);min-width:24px;text-align:right;}

/* ‚îÄ‚îÄ MOTM ‚îÄ‚îÄ */
.slide-motm{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;align-items:center;}
.motm-eyebrow-p{font-family:'Orbitron',sans-serif;font-size:0.54rem;letter-spacing:5px;display:flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:18px 18px 0;}
.motm-eyebrow-p::before,.motm-eyebrow-p::after{content:'';width:28px;height:1px;flex-shrink:0;}
.motm-avatar-wrap{position:relative;width:110px;height:110px;margin-top:12px;flex-shrink:0;}
.motm-ring-a{position:absolute;inset:-8px;border-radius:50%;animation:spinr 3s linear infinite;}
@keyframes spinr{to{transform:rotate(360deg);}}
.motm-ring-b{position:absolute;inset:-4px;border-radius:50%;}
.motm-core-a{position:absolute;inset:0;border-radius:50%;border:2px solid rgba(0,240,255,0.4);display:flex;align-items:center;justify-content:center;font-size:3.2rem;z-index:1;}
.motm-num-badge{position:absolute;bottom:-2px;right:-2px;z-index:2;width:30px;height:30px;border-radius:50%;font-family:'Orbitron',sans-serif;font-size:0.72rem;font-weight:900;display:flex;align-items:center;justify-content:center;border:2px solid;}
.motm-name-p{font-family:'Bebas Neue',sans-serif;font-size:1.9rem;letter-spacing:5px;line-height:1;margin-top:9px;text-align:center;}
.motm-pos-chip{font-family:'Orbitron',sans-serif;font-size:0.5rem;letter-spacing:3px;padding:4px 12px;border-radius:4px;margin-top:4px;}
.motm-match-ref{font-size:0.58rem;color:rgba(255,255,255,0.38);letter-spacing:2px;margin-top:3px;}
.motm-stats-p{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;padding:10px 12px 0;width:100%;}
.motm-sc{border-radius:7px;padding:8px 5px;text-align:center;}
.motm-sc .sv{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;line-height:1;}
.motm-sc .sl{font-size:0.5rem;letter-spacing:1.5px;color:rgba(255,255,255,0.42);text-transform:uppercase;margin-top:2px;}
.motm-rating-p{width:100%;padding:9px 12px 0;}
.motm-rating-top{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:5px;}
.motm-rating-lbl{font-family:'Orbitron',sans-serif;font-size:0.5rem;letter-spacing:3px;color:rgba(255,255,255,0.38);}
.motm-rating-val{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;line-height:1;}
.motm-rtrack{height:4px;border-radius:2px;background:rgba(255,255,255,0.07);overflow:hidden;}
.motm-rfill{height:100%;border-radius:2px;}
.motm-stars{font-size:1rem;letter-spacing:4px;margin-top:7px;}
.dl-hint{font-size:0.65rem;color:var(--ui-muted);letter-spacing:1px;text-align:center;}
</style>
</head>
<body>

<div class="topbar">
  <div class="topbar-logo">‚ö° FOOTPACK</div>
  <div class="topbar-tabs">
    <button class="tab-btn active" onclick="switchSlide('result')">R√©sultat</button>
    <button class="tab-btn" onclick="switchSlide('standings')">Classement</button>
    <button class="tab-btn" onclick="switchSlide('fixtures')">Fixtures</button>
    <button class="tab-btn" onclick="switchSlide('semifinal')">Demi-Finale</button>
    <button class="tab-btn" onclick="switchSlide('final')">Finale</button>
    <button class="tab-btn" onclick="switchSlide('motm')">M.O.T.M</button>
  </div>
  <div class="topbar-actions">
    <button class="btn-download" onclick="downloadImage()">‚¨á T√âL√âCHARGER</button>
  </div>
</div>

<div class="main">
<div class="sidebar" id="sidebar">

  <div class="section-label">Format</div>
  <div class="format-toggle">
    <div class="fmt-btn active" id="fmt-story" onclick="setFormat('story')"><span class="fmt-icon">üì±</span>STORY<br><span style="font-size:0.42rem;opacity:0.6">9:16</span></div>
    <div class="fmt-btn" id="fmt-post" onclick="setFormat('post')"><span class="fmt-icon">‚¨õ</span>POST<br><span style="font-size:0.42rem;opacity:0.6">1:1</span></div>
  </div>

  <div class="section-label">Couleurs</div>
  <div class="color-row">
    <div class="color-field"><label>Neon</label><input type="color" id="c-neon" value="#00F0FF" oninput="applyColors()"></div>
    <div class="color-field"><label>Fond 1</label><input type="color" id="c-bg" value="#020B18" oninput="applyColors()"></div>
    <div class="color-field"><label>Fond 2</label><input type="color" id="c-bg2" value="#071428" oninput="applyColors()"></div>
    <div class="color-field"><label>Texte</label><input type="color" id="c-text" value="#EEF6FF" oninput="applyColors()"></div>
  </div>

  <!-- RESULT -->
  <div id="ctrl-result">
    <div class="section-label">Tournoi</div>
    <div class="field-row"><label>Nom</label><input type="text" id="r-tourn" value="LIGUE DES CHAMPIONS" oninput="updateResult()"></div>
    <div class="two-col">
      <div class="field-row"><label>Journ√©e</label><input type="text" id="r-round" value="JOURN√âE 3 ¬∑ GROUPE A" oninput="updateResult()"></div>
      <div class="field-row"><label>Date</label><input type="text" id="r-date" value="24 F√âVR. 2026" oninput="updateResult()"></div>
    </div>
    <div class="field-row"><label>Stade</label><input type="text" id="r-venue" value="Stade Principal" oninput="updateResult()"></div>
    <div class="section-label">√âquipes & Score</div>
    <div class="two-col">
      <div class="field-row"><label>√âquipe A</label><input type="text" id="r-team1" value="ATLAS FC" oninput="updateResult()"></div>
      <div class="field-row"><label>Ville A</label><input type="text" id="r-city1" value="MARRAKECH" oninput="updateResult()"></div>
    </div>
    <div class="score-row">
      <div class="field-row"><label>Score A</label><input type="number" id="r-s1" value="3" min="0" max="99" oninput="updateResult()"></div>
      <div class="score-sep-lbl">‚Äì</div>
      <div class="field-row"><label>Score B</label><input type="number" id="r-s2" value="1" min="0" max="99" oninput="updateResult()"></div>
    </div>
    <div class="two-col">
      <div class="field-row"><label>√âquipe B</label><input type="text" id="r-team2" value="WOLVES SC" oninput="updateResult()"></div>
      <div class="field-row"><label>Ville B</label><input type="text" id="r-city2" value="CASABLANCA" oninput="updateResult()"></div>
    </div>
    <div class="section-label">Buteurs</div>
    <div class="scorer-list" id="scorers-list"></div>
    <button class="btn-add" onclick="addScorer()">+ Ajouter buteur</button>
  </div>

  <!-- STANDINGS (3 teams) -->
  <div id="ctrl-standings" style="display:none">
    <div class="section-label">En-t√™te</div>
    <div class="two-col">
      <div class="field-row"><label>Groupe</label><input type="text" id="std-group" value="GROUPE A" oninput="updateStandings()"></div>
      <div class="field-row"><label>Journ√©e</label><input type="text" id="std-round" value="JOURN√âE 3" oninput="updateStandings()"></div>
    </div>
    <div class="field-row"><label>Sous-titre</label><input type="text" id="std-sub" value="FOOTBALL ¬∑ SAISON 2025‚Äì26" oninput="updateStandings()"></div>
    <div class="section-label">3 √âquipes ¬∑ MJ G N P PTS</div>
    <div id="std-rows-edit"></div>
  </div>

  <!-- FIXTURES -->
  <div id="ctrl-fixtures" style="display:none">
    <div class="section-label">En-t√™te</div>
    <div class="two-col">
      <div class="field-row"><label>Journ√©e</label><input type="text" id="fx-matchday" value="JOURN√âE 3" oninput="updateFixtures()"></div>
      <div class="field-row"><label>P√©riode</label><input type="text" id="fx-period" value="28 F√âV ‚Äì 2 MARS" oninput="updateFixtures()"></div>
    </div>
    <div class="section-label">Matchs du groupe (3 matchs max)</div>
    <div id="fix-matches-list"></div>
  </div>

  <!-- SEMI-FINAL -->
  <div id="ctrl-semifinal" style="display:none">
    <div class="section-label">En-t√™te</div>
    <div class="field-row"><label>Tournoi</label><input type="text" id="sf-tourn" value="LIGUE DES CHAMPIONS" oninput="updateSemiFinal()"></div>
    <div class="two-col">
      <div class="field-row"><label>Date</label><input type="text" id="sf-date" value="5 MARS 2026" oninput="updateSemiFinal()"></div>
      <div class="field-row"><label>Stade</label><input type="text" id="sf-venue" value="Stade Principal" oninput="updateSemiFinal()"></div>
    </div>
    <div class="section-label">Demi-Finale 1</div>
    <div class="two-col">
      <div class="field-row"><label>√âquipe A</label><input type="text" id="sf1-t1" value="ATLAS FC" oninput="updateSemiFinal()"></div>
      <div class="field-row"><label>√âquipe B</label><input type="text" id="sf1-t2" value="HAWKS" oninput="updateSemiFinal()"></div>
    </div>
    <div class="score-row">
      <div class="field-row"><label>Score A</label><input type="number" id="sf1-s1" value="2" min="0" oninput="updateSemiFinal()"></div>
      <div class="score-sep-lbl">‚Äì</div>
      <div class="field-row"><label>Score B</label><input type="number" id="sf1-s2" value="1" min="0" oninput="updateSemiFinal()"></div>
    </div>
    <div class="field-row"><label>P√©naltys / AET (optionnel)</label><input type="text" id="sf1-pens" value="" placeholder="ex: TAB 4‚Äì3" oninput="updateSemiFinal()"></div>
    <div class="section-label">Demi-Finale 2</div>
    <div class="two-col">
      <div class="field-row"><label>√âquipe A</label><input type="text" id="sf2-t1" value="WOLVES SC" oninput="updateSemiFinal()"></div>
      <div class="field-row"><label>√âquipe B</label><input type="text" id="sf2-t2" value="TIGERS" oninput="updateSemiFinal()"></div>
    </div>
    <div class="score-row">
      <div class="field-row"><label>Score A</label><input type="number" id="sf2-s1" value="0" min="0" oninput="updateSemiFinal()"></div>
      <div class="score-sep-lbl">‚Äì</div>
      <div class="field-row"><label>Score B</label><input type="number" id="sf2-s2" value="0" min="0" oninput="updateSemiFinal()"></div>
    </div>
    <div class="field-row"><label>P√©naltys / AET (optionnel)</label><input type="text" id="sf2-pens" value="TAB 5‚Äì4" placeholder="ex: TAB 5‚Äì4" oninput="updateSemiFinal()"></div>
  </div>

  <!-- FINAL -->
  <div id="ctrl-final" style="display:none">
    <div class="section-label">En-t√™te</div>
    <div class="field-row"><label>Tournoi</label><input type="text" id="fn-tourn" value="LIGUE DES CHAMPIONS" oninput="updateFinal()"></div>
    <div class="two-col">
      <div class="field-row"><label>Date</label><input type="text" id="fn-date" value="8 MARS 2026" oninput="updateFinal()"></div>
      <div class="field-row"><label>Stade</label><input type="text" id="fn-venue" value="Stade National" oninput="updateFinal()"></div>
    </div>
    <div class="section-label">√âquipes & Score</div>
    <div class="two-col">
      <div class="field-row"><label>√âquipe A</label><input type="text" id="fn-t1" value="ATLAS FC" oninput="updateFinal()"></div>
      <div class="field-row"><label>Ville A</label><input type="text" id="fn-city1" value="MARRAKECH" oninput="updateFinal()"></div>
    </div>
    <div class="score-row">
      <div class="field-row"><label>Score A</label><input type="number" id="fn-s1" value="2" min="0" oninput="updateFinal()"></div>
      <div class="score-sep-lbl">‚Äì</div>
      <div class="field-row"><label>Score B</label><input type="number" id="fn-s2" value="1" min="0" oninput="updateFinal()"></div>
    </div>
    <div class="two-col">
      <div class="field-row"><label>√âquipe B</label><input type="text" id="fn-t2" value="WOLVES SC" oninput="updateFinal()"></div>
      <div class="field-row"><label>Ville B</label><input type="text" id="fn-city2" value="CASABLANCA" oninput="updateFinal()"></div>
    </div>
    <div class="field-row"><label>P√©naltys / AET (optionnel)</label><input type="text" id="fn-pens" value="" placeholder="ex: TAB 5‚Äì3 ¬∑ AET" oninput="updateFinal()"></div>
    <div class="section-label">üèÜ Champion</div>
    <div class="field-row"><label>Vainqueur</label><input type="text" id="fn-winner" value="ATLAS FC" oninput="updateFinal()"></div>
    <div class="section-label">Buteurs</div>
    <div class="scorer-list" id="final-scorers-list"></div>
    <button class="btn-add" onclick="addFinalScorer()">+ Ajouter buteur</button>
  </div>

  <!-- MOTM -->
  <div id="ctrl-motm" style="display:none">
    <div class="section-label">Joueur</div>
    <div class="field-row"><label>Nom</label><input type="text" id="m-name" value="K. HASSAN" oninput="updateMOTM()"></div>
    <div class="two-col">
      <div class="field-row"><label>Poste</label><input type="text" id="m-pos" value="ATTAQUANT" oninput="updateMOTM()"></div>
      <div class="field-row"><label>Num√©ro</label><input type="number" id="m-num" value="10" min="1" max="99" oninput="updateMOTM()"></div>
    </div>
    <div class="field-row"><label>√âquipe</label><input type="text" id="m-team" value="ATLAS FC" oninput="updateMOTM()"></div>
    <div class="field-row"><label>R√©f√©rence match</label><input type="text" id="m-matchref" value="vs WOLVES SC ¬∑ 3‚Äì1 ¬∑ J3" oninput="updateMOTM()"></div>
    <div class="section-label">Statistiques</div>
    <div class="motm-stats-grid-edit" id="motm-stats-edit"></div>
    <div class="section-label">Rating</div>
    <div class="rating-slider-wrap">
      <input type="range" id="m-rating" min="5" max="10" step="0.1" value="9.4" oninput="updateMOTM()">
      <div class="rating-val-lbl" id="rating-display">9.4</div>
    </div>
  </div>

  <div class="section-label">Filigrane</div>
  <div class="field-row"><label>Watermark</label><input type="text" id="watermark-text" value="@TOURNAMENT ¬∑ 2025‚Äì26" oninput="updateWatermark()"></div>

</div><!-- /sidebar -->

<div class="canvas-area">
  <div class="preview-wrapper">
    <div class="preview-label" id="format-label">üì± STORY ¬∑ 9:16</div>
    <div id="preview-frame" class="story-format">
      <div class="pf-bg" id="pf-bg"></div>
      <div class="pf-noise"></div><div class="pf-scanlines"></div>
      <div class="pf-corners" id="pf-corners">
        <div class="c tl"></div><div class="c tr"></div>
        <div class="c bl"></div><div class="c br"></div>
      </div>

      <!-- RESULT -->
      <div class="slide-result" id="slide-result">
        <div class="res-top">
          <div><div class="res-tourn-name" id="p-tourn">LIGUE DES CHAMPIONS</div><div class="res-round" id="p-round">‚¨° JOURN√âE 3 ¬∑ GROUPE A</div></div>
          <div class="res-ft-pill" id="p-ft-pill">FULL TIME</div>
        </div>
        <div class="res-teams">
          <div class="res-team-col"><div class="res-team-name" id="p-team1">ATLAS FC</div><div class="res-team-city" id="p-city1">MARRAKECH</div></div>
          <div class="res-score" id="p-score">3 ‚Äì 1</div>
          <div class="res-team-col"><div class="res-team-name" id="p-team2">WOLVES SC</div><div class="res-team-city" id="p-city2">CASABLANCA</div></div>
        </div>
        <div class="res-divider" id="p-divider"></div>
        <div class="res-stats">
          <div class="res-stat"><div class="rv" id="p-poss">62%</div><div class="rl">Possession</div></div>
          <div class="res-stat"><div class="rv" id="p-shots">14</div><div class="rl">Tirs</div></div>
          <div class="res-stat"><div class="rv" id="p-corners">5</div><div class="rl">Corners</div></div>
          <div class="res-stat"><div class="rv" id="p-cards">2</div><div class="rl">Cartons</div></div>
        </div>
        <div class="res-scorers"><div class="res-scorers-title" id="p-scorers-title">BUTEURS</div><div id="p-scorers-list"></div></div>
      </div>

      <!-- STANDINGS -->
      <div class="slide-standings slide-hidden" id="slide-standings">
        <div class="std-hdr-p">
          <div><div class="std-eyebrow-p" id="std-eyebrow-p">GROUPE A ¬∑ JOURN√âE 3</div><div class="std-title-p">CLASSEMENT</div><div class="std-subtitle-p" id="std-subtitle-p">FOOTBALL ¬∑ SAISON 2025‚Äì26</div></div>
          <div class="std-trophy">üèÜ</div>
        </div>
        <div class="std-col-head"><div>#</div><div>√âQUIPE</div><div>MJ</div><div>G</div><div>N</div><div>P</div><div>PTS</div></div>
        <div class="std-rows-p" id="std-rows-p"></div>
        <div class="std-legend-p">
          <div class="std-leg"><div class="lb" id="legend-q-dot"></div>Qualification</div>
          <div class="std-leg"><div class="lb" style="background:#FF3355;box-shadow:0 0 5px #FF3355;"></div>√âlimin√©</div>
        </div>
      </div>

      <!-- FIXTURES -->
      <div class="slide-fixtures slide-hidden" id="slide-fixtures">
        <div class="fix-hdr">
          <div class="fix-eyebrow-p" id="fx-eyebrow-p">JOURN√âE 3</div>
          <div class="fix-big-title">FIXTURES</div>
          <div class="fix-subtitle-p" id="fx-period-p">28 F√âV ‚Äì 2 MARS ¬∑ 2026</div>
        </div>
        <div class="fix-body-list" id="fix-body-p"></div>
      </div>

      <!-- SEMI-FINAL -->
      <div class="slide-semifinal slide-hidden" id="slide-semifinal">
        <div class="ko-header">
          <div class="ko-stage-badge" id="sf-badge-p">DEMI-FINALES</div>
          <div class="ko-main-title" id="sf-title-p">LIGUE DES CHAMPIONS</div>
          <div class="ko-sub" id="sf-sub-p">5 MARS 2026 ¬∑ STADE PRINCIPAL</div>
        </div>
        <div class="ko-matches-wrap">
          <div class="ko-match-card" id="sf1-card">
            <div class="ko-match-num">‚ö° DEMI-FINALE 1</div>
            <div class="ko-teams-row">
              <div class="ko-team-blk"><div class="ko-team-nm" id="sf1-t1-p">ATLAS FC</div></div>
              <div class="ko-score-blk">
                <div class="ko-score-big" id="sf1-score-p">2 ‚Äì 1</div>
                <div class="ko-score-label">TEMPS R√âGLEMENTAIRE</div>
              </div>
              <div class="ko-team-blk"><div class="ko-team-nm" id="sf1-t2-p">HAWKS</div></div>
            </div>
            <div class="ko-pens slide-hidden" id="sf1-pens-p"></div>
            <div class="ko-match-info"><span class="ko-info-chip" id="sf1-info-p">üèü Stade Principal</span></div>
          </div>
          <div class="ko-divider-lbl"><span>‚îÄ‚îÄ‚îÄ VS ‚îÄ‚îÄ‚îÄ</span></div>
          <div class="ko-match-card" id="sf2-card">
            <div class="ko-match-num">‚ö° DEMI-FINALE 2</div>
            <div class="ko-teams-row">
              <div class="ko-team-blk"><div class="ko-team-nm" id="sf2-t1-p">WOLVES SC</div></div>
              <div class="ko-score-blk">
                <div class="ko-score-big" id="sf2-score-p">0 ‚Äì 0</div>
                <div class="ko-score-label">TEMPS R√âGLEMENTAIRE</div>
              </div>
              <div class="ko-team-blk"><div class="ko-team-nm" id="sf2-t2-p">TIGERS</div></div>
            </div>
            <div class="ko-pens" id="sf2-pens-p">TAB 5‚Äì4</div>
            <div class="ko-match-info"><span class="ko-info-chip" id="sf2-info-p">üèü Stade Principal</span></div>
          </div>
        </div>
      </div>

      <!-- FINAL -->
      <div class="slide-final slide-hidden" id="slide-final">
        <div class="final-bg-glow" id="final-bg-glow"></div>
        <div class="final-header">
          <div class="final-crown">üèÜ</div>
          <div class="final-stage-badge" id="fn-badge-p">GRANDE FINALE</div>
          <div class="final-title" id="fn-title-p">LIGUE DES CHAMPIONS</div>
          <div class="final-subtitle" id="fn-sub-p">8 MARS 2026 ¬∑ STADE NATIONAL</div>
        </div>
        <div class="final-teams">
          <div class="final-team-col"><div class="final-team-nm" id="fn-t1-p">ATLAS FC</div><div class="final-team-city" id="fn-city1-p">MARRAKECH</div></div>
          <div class="final-score-center">
            <div class="final-score-big" id="fn-score-p">2 ‚Äì 1</div>
            <div class="final-score-ft">TEMPS R√âGLEMENTAIRE</div>
          </div>
          <div class="final-team-col"><div class="final-team-nm" id="fn-t2-p">WOLVES SC</div><div class="final-team-city" id="fn-city2-p">CASABLANCA</div></div>
        </div>
        <div class="final-divider" id="fn-divider"></div>
        <div class="final-winner-section">
          <div class="final-winner-label">üèÜ CHAMPION</div>
          <div class="final-winner-name" id="fn-winner-p">ATLAS FC</div>
          <div class="final-pens slide-hidden" id="fn-pens-p"></div>
        </div>
        <div class="final-scorers">
          <div class="final-scorers-title" id="fn-scorers-title">BUTEURS</div>
          <div id="fn-scorers-list-p"></div>
        </div>
      </div>

      <!-- MOTM -->
      <div class="slide-motm slide-hidden" id="slide-motm">
        <div class="motm-eyebrow-p" id="m-eyebrow-p">MAN OF THE MATCH</div>
        <div class="motm-avatar-wrap">
          <div class="motm-ring-a" id="motm-ring-a"></div>
          <div class="motm-ring-b" id="motm-ring-b"></div>
          <div class="motm-core-a" id="motm-core-a">üèÜ</div>
          <div class="motm-num-badge" id="motm-num-badge">10</div>
        </div>
        <div class="motm-name-p" id="motm-name-p">K. HASSAN</div>
        <div class="motm-pos-chip" id="m-pos-chip">ATTAQUANT</div>
        <div class="motm-match-ref" id="m-matchref-p">vs WOLVES SC ¬∑ 3‚Äì1</div>
        <div class="motm-stats-p" id="motm-stats-p"></div>
        <div class="motm-rating-p">
          <div class="motm-rating-top"><div class="motm-rating-lbl">MATCH RATING</div><div class="motm-rating-val" id="m-rval-p">9.4</div></div>
          <div class="motm-rtrack"><div class="motm-rfill" id="m-rfill-p" style="width:94%"></div></div>
        </div>
        <div class="motm-stars" id="m-stars-p">‚≠ê ‚≠ê ‚≠ê ‚≠ê ‚≠ê</div>
      </div>

      <div class="pf-watermark" id="p-watermark">@TOURNAMENT ¬∑ 2025‚Äì26</div>
    </div>
    <div class="dl-hint">Cliquez sur ‚¨á T√âL√âCHARGER pour sauvegarder l'image</div>
  </div>
</div>
</div><!-- /main -->

<script>
let currentSlide='result',currentFormat='story';
const SLIDES=['result','standings','fixtures','semifinal','final','motm'];

const scorers=[
  {name:'K. HASSAN',team:'A',min:23},{name:'M. DIALLO',team:'A',min:58},
  {name:'Y. MARTINEZ',team:'B',min:71},{name:'K. HASSAN',team:'A',min:89},
];
const finalScorers=[
  {name:'K. HASSAN',team:'A',min:34},{name:'M. DIALLO',team:'A',min:67},
  {name:'A. BELLO',team:'B',min:78},
];
// 3 teams per group
const standings=[
  {name:'ATLAS FC',mj:3,g:2,n:1,p:0,pts:7,zone:'q'},
  {name:'WOLVES SC',mj:3,g:1,n:1,p:1,pts:4,zone:''},
  {name:'HAWKS',mj:3,g:0,n:0,p:3,pts:0,zone:'el'},
];
// 3 matches per group (each team plays each other once)
const fixtures=[
  {day:'28',mon:'F√âV',team1:'ATLAS FC',team2:'HAWKS',venue:'Stade Principal',time:'67\'',type:'live'},
  {day:'28',mon:'F√âV',team1:'WOLVES SC',team2:'ATLAS FC',venue:'Arena Nord',time:'2‚Äì1',type:'done'},
  {day:'01',mon:'MARS',team1:'HAWKS',team2:'WOLVES SC',venue:'Stade Sud',time:'17:30',type:'upcoming'},
];
const motmStats=[
  {label:'Buts',val:'2'},{label:'Passe D.',val:'1'},{label:'Tirs',val:'7'},
  {label:'Passes',val:'94%'},{label:'Dribbles',val:'5'},{label:'Distance',val:'9km'},
];

window.onload=()=>{
  buildScorersEditor();buildFinalScorersEditor();
  buildStandingsEditor();buildFixturesEditor();buildMOTMEditor();
  applyColors();updateResult();updateStandings();updateFixtures();
  updateSemiFinal();updateFinal();updateMOTM();updateWatermark();
};

function switchSlide(name){
  currentSlide=name;
  document.querySelectorAll('.tab-btn').forEach((b,i)=>b.classList.toggle('active',SLIDES[i]===name));
  SLIDES.forEach(s=>{
    document.getElementById('slide-'+s).classList.toggle('slide-hidden',s!==name);
    document.getElementById('ctrl-'+s).style.display=(s===name)?'block':'none';
  });
}

function setFormat(fmt){
  currentFormat=fmt;
  document.getElementById('preview-frame').className=fmt==='story'?'story-format':'post-format';
  document.getElementById('format-label').textContent=fmt==='story'?'üì± STORY ¬∑ 9:16':'‚¨õ POST ¬∑ 1:1';
  document.getElementById('fmt-story').classList.toggle('active',fmt==='story');
  document.getElementById('fmt-post').classList.toggle('active',fmt==='post');
}

function hexToRGB(h){return `${parseInt(h.slice(1,3),16)},${parseInt(h.slice(3,5),16)},${parseInt(h.slice(5,7),16)}`;}

function neonStyle(){
  const n=document.getElementById('c-neon').value;
  return {neon:n,bg:document.getElementById('c-bg').value,bg2:document.getElementById('c-bg2').value,nr:hexToRGB(n),glow:`rgba(${hexToRGB(n)},0.3)`,soft:`rgba(${hexToRGB(n)},0.07)`};
}

function applyColors(){
  const {neon,bg,bg2,nr,glow,soft}=neonStyle();
  // frame bg
  document.getElementById('pf-bg').style.background=`radial-gradient(ellipse 70% 55% at 50% 35%,rgba(${hexToRGB(bg2)},0.9) 0%,${bg} 70%)`;
  // corners
  document.querySelectorAll('.pf-corners .c').forEach(c=>c.style.borderColor=neon);
  // result
  const pill=document.getElementById('p-ft-pill');
  pill.style.cssText=`background:${neon};color:${bg};box-shadow:0 0 12px ${glow};font-family:'Orbitron',sans-serif;font-size:0.56rem;font-weight:700;letter-spacing:2px;padding:5px 12px;border-radius:4px;`;
  document.getElementById('p-tourn').style.color=neon;
  document.getElementById('p-scorers-title').style.color=neon;
  document.getElementById('p-divider').style.cssText=`background:linear-gradient(90deg,transparent,${neon},transparent);box-shadow:0 0 6px ${neon};width:82%;height:1px;margin:14px auto 0;position:relative;z-index:2;`;
  document.querySelectorAll('.rv').forEach(el=>el.style.color=neon);
  // standings
  document.getElementById('std-eyebrow-p').style.color=neon;
  document.getElementById('legend-q-dot').style.cssText=`background:${neon};box-shadow:0 0 5px ${neon};width:9px;height:9px;border-radius:2px;`;
  // fixtures
  document.getElementById('fx-eyebrow-p').style.color=neon;
  // semifinal badge
  const sfb=document.getElementById('sf-badge-p');
  sfb.style.background=neon;sfb.style.color=bg;sfb.style.boxShadow=`0 0 14px ${glow}`;
  ['sf1-card','sf2-card'].forEach(id=>{
    const c=document.getElementById(id);
    c.style.background=`rgba(${nr},0.05)`;c.style.border=`1px solid rgba(${nr},0.2)`;
  });
  ['sf1-score-p','sf2-score-p'].forEach(id=>{
    const el=document.getElementById(id);el.style.color=neon;el.style.textShadow=`0 0 18px ${glow}`;
  });
  // final badge
  const fnb=document.getElementById('fn-badge-p');
  fnb.style.background=neon;fnb.style.color=bg;fnb.style.boxShadow=`0 0 20px ${glow}`;
  document.getElementById('fn-divider').style.cssText=`background:linear-gradient(90deg,transparent,${neon},transparent);box-shadow:0 0 10px ${neon};width:80%;height:1px;margin:12px auto 0;position:relative;z-index:2;`;
  document.getElementById('fn-score-p').style.color=neon;document.getElementById('fn-score-p').style.textShadow=`0 0 30px ${glow}`;
  document.getElementById('fn-winner-p').style.color=neon;document.getElementById('fn-winner-p').style.textShadow=`0 0 20px ${glow}`;
  document.getElementById('fn-scorers-title').style.color=neon;
  document.getElementById('final-bg-glow').style.background=`radial-gradient(ellipse 70% 60% at 50% 50%,rgba(${nr},0.14) 0%,transparent 70%)`;
  // motm
  document.getElementById('m-eyebrow-p').style.color=neon;
  document.getElementById('motm-ring-a').style.background=`conic-gradient(${neon} 0deg,rgba(${nr},0.4) 120deg,transparent 180deg,${neon} 360deg)`;
  document.getElementById('motm-ring-b').style.background=bg;
  document.getElementById('motm-num-badge').style.cssText=`background:${neon};color:${bg};border-color:${bg};position:absolute;bottom:-2px;right:-2px;z-index:2;width:30px;height:30px;border-radius:50%;font-family:'Orbitron',sans-serif;font-size:0.72rem;font-weight:900;display:flex;align-items:center;justify-content:center;border:2px solid;`;
  document.getElementById('m-pos-chip').style.cssText=`background:${soft};border:1px solid rgba(${nr},0.3);color:${neon};font-family:'Orbitron',sans-serif;font-size:0.5rem;letter-spacing:3px;padding:4px 12px;border-radius:4px;margin-top:4px;`;
  document.getElementById('m-rval-p').style.color=neon;
  document.getElementById('m-rfill-p').style.background=`linear-gradient(90deg,rgba(${nr},0.6),${neon})`;
  renderScorers();renderFinalScorers();updateStandings();updateFixtures();updateSemiFinal();
}

// RESULT
function updateResult(){
  setText('p-tourn',v('r-tourn'));setText('p-round','‚¨° '+v('r-round'));
  setText('p-team1',v('r-team1'));setText('p-city1',v('r-city1'));
  setText('p-team2',v('r-team2'));setText('p-city2',v('r-city2'));
  setText('p-score',v('r-s1')+' ‚Äì '+v('r-s2'));
  renderScorers();
}
function renderScorers(){
  const {neon,nr}=neonStyle();const t1=v('r-team1')||'A',t2=v('r-team2')||'B';
  document.getElementById('p-scorers-list').innerHTML=scorers.map(s=>`
    <div class="res-goal-entry"><span>‚öΩ</span><span class="gname">${s.name}</span>
    <span class="gtag" style="background:rgba(${nr},0.1);color:${neon}">${s.team==='A'?t1.split(' ')[0]:t2.split(' ')[0]}</span>
    <span class="gmin">${s.min}'</span></div>`).join('');
}
function buildScorersEditor(){
  const list=document.getElementById('scorers-list');list.innerHTML='';
  scorers.forEach((s,i)=>{
    const row=document.createElement('div');row.className='scorer-entry';
    row.innerHTML=`<input type="text" placeholder="Nom" value="${s.name}" oninput="scorers[${i}].name=this.value;renderScorers()">
      <select onchange="scorers[${i}].team=this.value;renderScorers()"><option value="A" ${s.team==='A'?'selected':''}>A</option><option value="B" ${s.team==='B'?'selected':''}>B</option></select>
      <input type="number" placeholder="Min" value="${s.min}" min="1" max="120" oninput="scorers[${i}].min=+this.value;renderScorers()">
      <button class="btn-rm" onclick="removeScorer(${i})">√ó</button>`;
    list.appendChild(row);
  });
}
function addScorer(){scorers.push({name:'JOUEUR',team:'A',min:1});buildScorersEditor();renderScorers();}
function removeScorer(i){scorers.splice(i,1);buildScorersEditor();renderScorers();}

// STANDINGS
function buildStandingsEditor(){
  const cont=document.getElementById('std-rows-edit');cont.innerHTML='';
  standings.forEach((s,i)=>{
    const w=document.createElement('div');
    w.style.cssText='display:flex;gap:4px;align-items:center;margin-bottom:5px;';
    w.innerHTML=`<div style="display:grid;grid-template-columns:1fr 22px 22px 22px 22px 28px;gap:3px;flex:1;">
      <input type="text" value="${s.name}" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:5px;color:var(--ui-text);font-size:0.74rem;padding:5px 6px;outline:none;" oninput="standings[${i}].name=this.value;updateStandings()">
      <input type="number" value="${s.mj}" min="0" max="9" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:5px;color:var(--ui-text);font-size:0.74rem;padding:5px 2px;outline:none;text-align:center;" oninput="standings[${i}].mj=+this.value;updateStandings()">
      <input type="number" value="${s.g}" min="0" max="9" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:5px;color:var(--ui-text);font-size:0.74rem;padding:5px 2px;outline:none;text-align:center;" oninput="standings[${i}].g=+this.value;updateStandings()">
      <input type="number" value="${s.n}" min="0" max="9" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:5px;color:var(--ui-text);font-size:0.74rem;padding:5px 2px;outline:none;text-align:center;" oninput="standings[${i}].n=+this.value;updateStandings()">
      <input type="number" value="${s.p}" min="0" max="9" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:5px;color:var(--ui-text);font-size:0.74rem;padding:5px 2px;outline:none;text-align:center;" oninput="standings[${i}].p=+this.value;updateStandings()">
      <input type="number" value="${s.pts}" min="0" max="99" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:5px;color:var(--ui-text);font-size:0.74rem;padding:5px 2px;outline:none;text-align:center;" oninput="standings[${i}].pts=+this.value;updateStandings()">
    </div>
    <select title="Zone" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:5px;color:var(--ui-text);font-size:0.6rem;padding:5px 2px;outline:none;cursor:pointer;" onchange="standings[${i}].zone=this.value;updateStandings()">
      <option value="" ${s.zone===''?'selected':''}>‚Äì</option>
      <option value="q" ${s.zone==='q'?'selected':''}>üîµ Q</option>
      <option value="el" ${s.zone==='el'?'selected':''}>üî¥ E</option>
    </select>`;
    cont.appendChild(w);
  });
}
function updateStandings(){
  const {neon,nr}=neonStyle();
  setText('std-eyebrow-p',v('std-group')+' ¬∑ '+v('std-round'));
  setText('std-subtitle-p',v('std-sub'));
  document.getElementById('legend-q-dot').style.cssText=`background:${neon};box-shadow:0 0 5px ${neon};width:9px;height:9px;border-radius:2px;`;
  const cont=document.getElementById('std-rows-p');cont.innerHTML='';
  standings.forEach((s,i)=>{
    const isTop=i===0;
    const row=document.createElement('div');
    row.className='std-row-p'+(isTop?' top1':'');
    if(isTop) row.style.background=`linear-gradient(90deg,rgba(${nr},0.09) 0%,transparent 80%)`;
    const zColor=s.zone==='q'?neon:s.zone==='el'?'#FF3355':'transparent';
    const zShadow=s.zone==='q'?`0 0 5px ${neon}`:s.zone==='el'?'0 0 5px #FF3355':'none';
    const ptsColor=s.zone==='el'?'rgba(255,255,255,0.3)':isTop?neon:'rgba(255,255,255,0.65)';
    row.innerHTML=`${s.zone?`<div class="std-zone-bar" style="background:${zColor};box-shadow:${zShadow};"></div>`:''}
      <div class="std-pos-p" style="color:${isTop?neon:'rgba(255,255,255,0.4)'}">${i+1}</div>
      <div class="std-name-p" style="color:${isTop?neon:'#EEF6FF'}">${s.name}</div>
      <div class="std-col-p">${s.mj}</div><div class="std-col-p">${s.g}</div>
      <div class="std-col-p">${s.n}</div><div class="std-col-p">${s.p}</div>
      <div class="std-pts-p" style="color:${ptsColor}">${s.pts}</div>`;
    cont.appendChild(row);
  });
}

// FIXTURES
function buildFixturesEditor(){
  const cont=document.getElementById('fix-matches-list');cont.innerHTML='';
  fixtures.forEach((f,i)=>{
    const w=document.createElement('div');
    w.style.cssText='background:rgba(0,0,0,0.2);border:1px solid var(--ui-border);border-radius:8px;padding:9px;margin-bottom:8px;display:flex;flex-direction:column;gap:5px;';
    w.innerHTML=`<div style="display:flex;gap:5px;">
      <select style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.72rem;padding:5px;outline:none;" onchange="fixtures[${i}].type=this.value;updateFixtures()">
        <option value="live" ${f.type==='live'?'selected':''}>üî¥ LIVE</option>
        <option value="done" ${f.type==='done'?'selected':''}>‚úÖ Termin√©</option>
        <option value="upcoming" ${f.type==='upcoming'?'selected':''}>üïê √Ä venir</option>
      </select>
      <input type="text" placeholder="Heure/Score" value="${f.time}" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.78rem;padding:5px 7px;outline:none;flex:1;" oninput="fixtures[${i}].time=this.value;updateFixtures()">
    </div>
    <div style="display:grid;grid-template-columns:1fr 8px 1fr;gap:4px;align-items:center;">
      <input type="text" value="${f.team1}" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.78rem;padding:5px 7px;outline:none;" oninput="fixtures[${i}].team1=this.value;updateFixtures()">
      <div style="text-align:center;color:var(--ui-muted);font-family:'Bebas Neue',sans-serif;font-size:1rem;">‚Äì</div>
      <input type="text" value="${f.team2}" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.78rem;padding:5px 7px;outline:none;" oninput="fixtures[${i}].team2=this.value;updateFixtures()">
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:4px;">
      <input type="text" value="${f.day}" placeholder="Jour" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.78rem;padding:5px 7px;outline:none;text-align:center;" oninput="fixtures[${i}].day=this.value;updateFixtures()">
      <input type="text" value="${f.mon}" placeholder="Mois" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.78rem;padding:5px 7px;outline:none;text-align:center;" oninput="fixtures[${i}].mon=this.value;updateFixtures()">
      <input type="text" value="${f.venue}" placeholder="Stade" style="background:rgba(0,0,0,0.4);border:1px solid var(--ui-border);border-radius:6px;color:var(--ui-text);font-size:0.78rem;padding:5px 7px;outline:none;" oninput="fixtures[${i}].venue=this.value;updateFixtures()">
    </div>`;
    cont.appendChild(w);
  });
}
function updateFixtures(){
  const {neon,bg,nr}=neonStyle();
  setText('fx-eyebrow-p',v('fx-matchday'));
  setText('fx-period-p',v('fx-period')+' ¬∑ 2026');
  const body=document.getElementById('fix-body-p');body.innerHTML='';
  fixtures.forEach(f=>{
    const isLive=f.type==='live',isDone=f.type==='done';
    const card=document.createElement('div');card.className='fix-card-p';
    card.style.cssText=isLive
      ?`background:rgba(${nr},0.07);border:1px solid rgba(${nr},0.45);border-left:3px solid ${neon};`
      :`background:rgba(${nr},0.04);border:1px solid rgba(${nr},0.14);border-left:3px solid rgba(${nr},${isDone?'0.22':'0.1'});`;
    card.innerHTML=`<div class="fix-date-col">
        <div class="fd" style="color:${neon};text-shadow:0 0 8px rgba(${nr},0.4)">${f.day}</div>
        <div class="fm">${f.mon}</div>
      </div>
      <div class="fix-vsep"></div>
      <div class="fix-info">
        <div class="fix-matchup-lbl">${f.team1} vs ${f.team2}</div>
        <div class="fix-venue-lbl">üèü ${f.venue}</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:3px;">
        <div class="fix-time-lbl" style="color:${isLive?neon:'rgba(255,255,255,0.7)'};${isLive?`animation:blink 1.3s infinite;text-shadow:0 0 8px rgba(${nr},0.5);`:''}">${f.time}</div>
        ${isLive?`<div class="fix-live-badge" style="background:${neon};color:${bg}">LIVE</div>`:''}
      </div>`;
    body.appendChild(card);
  });
}

// SEMI-FINAL
function updateSemiFinal(){
  const {neon,bg,nr,glow}=neonStyle();
  setText('sf-title-p',v('sf-tourn'));
  setText('sf-sub-p',v('sf-date')+' ¬∑ '+v('sf-venue').toUpperCase());
  setText('sf1-t1-p',v('sf1-t1'));setText('sf1-t2-p',v('sf1-t2'));
  setText('sf1-score-p',v('sf1-s1')+' ‚Äì '+v('sf1-s2'));
  setText('sf2-t1-p',v('sf2-t1'));setText('sf2-t2-p',v('sf2-t2'));
  setText('sf2-score-p',v('sf2-s1')+' ‚Äì '+v('sf2-s2'));
  setText('sf1-info-p','üèü '+v('sf-venue'));setText('sf2-info-p','üèü '+v('sf-venue'));
  const p1=v('sf1-pens'),p2=v('sf2-pens');
  const pe1=document.getElementById('sf1-pens-p'),pe2=document.getElementById('sf2-pens-p');
  if(p1){pe1.classList.remove('slide-hidden');pe1.textContent=p1;pe1.style.color=neon;}else pe1.classList.add('slide-hidden');
  if(p2){pe2.classList.remove('slide-hidden');pe2.textContent=p2;pe2.style.color=neon;}else pe2.classList.add('slide-hidden');
  const sfb=document.getElementById('sf-badge-p');sfb.style.background=neon;sfb.style.color=bg;sfb.style.boxShadow=`0 0 14px ${glow}`;
  ['sf1-card','sf2-card'].forEach(id=>{const c=document.getElementById(id);c.style.background=`rgba(${nr},0.05)`;c.style.border=`1px solid rgba(${nr},0.2)`;});
  ['sf1-score-p','sf2-score-p'].forEach(id=>{const el=document.getElementById(id);el.style.color=neon;el.style.textShadow=`0 0 18px ${glow}`;});
}

// FINAL
function updateFinal(){
  const {neon,bg,nr,glow}=neonStyle();
  setText('fn-title-p',v('fn-tourn'));
  setText('fn-sub-p',v('fn-date')+' ¬∑ '+v('fn-venue').toUpperCase());
  setText('fn-t1-p',v('fn-t1'));setText('fn-city1-p',v('fn-city1'));
  setText('fn-t2-p',v('fn-t2'));setText('fn-city2-p',v('fn-city2'));
  setText('fn-score-p',v('fn-s1')+' ‚Äì '+v('fn-s2'));
  setText('fn-winner-p',v('fn-winner'));
  const pens=v('fn-pens'),pensEl=document.getElementById('fn-pens-p');
  if(pens){pensEl.classList.remove('slide-hidden');pensEl.textContent=pens;pensEl.style.color=neon;}
  else pensEl.classList.add('slide-hidden');
  document.getElementById('fn-badge-p').style.cssText=`background:${neon};color:${bg};box-shadow:0 0 20px ${glow};display:inline-block;font-family:'Orbitron',sans-serif;font-size:0.6rem;letter-spacing:5px;padding:5px 20px;border-radius:4px;margin-bottom:6px;`;
  document.getElementById('fn-divider').style.cssText=`background:linear-gradient(90deg,transparent,${neon},transparent);box-shadow:0 0 10px ${neon};width:80%;height:1px;margin:12px auto 0;position:relative;z-index:2;`;
  document.getElementById('fn-score-p').style.color=neon;document.getElementById('fn-score-p').style.textShadow=`0 0 30px ${glow}`;
  document.getElementById('fn-winner-p').style.color=neon;document.getElementById('fn-winner-p').style.textShadow=`0 0 20px ${glow}`;
  document.getElementById('fn-scorers-title').style.color=neon;
  document.getElementById('final-bg-glow').style.background=`radial-gradient(ellipse 70% 60% at 50% 50%,rgba(${nr},0.14) 0%,transparent 70%)`;
  renderFinalScorers();
}
function renderFinalScorers(){
  const {neon,nr}=neonStyle();const t1=v('fn-t1')||'A',t2=v('fn-t2')||'B';
  document.getElementById('fn-scorers-list-p').innerHTML=finalScorers.map(s=>`
    <div class="final-goal-entry"><span>‚öΩ</span><span class="gname">${s.name}</span>
    <span class="gtag" style="background:rgba(${nr},0.1);color:${neon}">${s.team==='A'?t1.split(' ')[0]:t2.split(' ')[0]}</span>
    <span class="gmin">${s.min}'</span></div>`).join('');
}
function buildFinalScorersEditor(){
  const list=document.getElementById('final-scorers-list');list.innerHTML='';
  finalScorers.forEach((s,i)=>{
    const row=document.createElement('div');row.className='scorer-entry';
    row.innerHTML=`<input type="text" placeholder="Nom" value="${s.name}" oninput="finalScorers[${i}].name=this.value;renderFinalScorers()">
      <select onchange="finalScorers[${i}].team=this.value;renderFinalScorers()"><option value="A" ${s.team==='A'?'selected':''}>A</option><option value="B" ${s.team==='B'?'selected':''}>B</option></select>
      <input type="number" placeholder="Min" value="${s.min}" min="1" max="120" oninput="finalScorers[${i}].min=+this.value;renderFinalScorers()">
      <button class="btn-rm" onclick="removeFinalScorer(${i})">√ó</button>`;
    list.appendChild(row);
  });
}
function addFinalScorer(){finalScorers.push({name:'JOUEUR',team:'A',min:1});buildFinalScorersEditor();renderFinalScorers();}
function removeFinalScorer(i){finalScorers.splice(i,1);buildFinalScorersEditor();renderFinalScorers();}

// MOTM
function buildMOTMEditor(){
  const cont=document.getElementById('motm-stats-edit');cont.innerHTML='';
  motmStats.forEach((s,i)=>{
    const w=document.createElement('div');w.className='motm-stat-edit';
    w.innerHTML=`<label>${s.label}</label><input type="text" value="${s.val}" oninput="motmStats[${i}].val=this.value;updateMOTM()">`;
    cont.appendChild(w);
  });
}
function updateMOTM(){
  const {neon,bg,nr,glow,soft}=neonStyle();
  const rating=document.getElementById('m-rating').value;
  setText('motm-name-p',v('m-name'));setText('m-pos-chip',v('m-pos').toUpperCase());
  setText('m-matchref-p',v('m-matchref'));setText('motm-num-badge',v('m-num'));
  setText('m-rval-p',rating);document.getElementById('rating-display').textContent=rating;
  document.getElementById('m-rfill-p').style.width=((+rating/10)*100)+'%';
  setText('m-stars-p','‚≠ê '.repeat(Math.round(+rating/2)).trim());
  document.getElementById('motm-stats-p').innerHTML=motmStats.map(s=>`
    <div class="motm-sc" style="background:rgba(${nr},0.06);border:1px solid rgba(${nr},0.15);">
      <div class="sv" style="color:${neon};text-shadow:0 0 8px ${glow}">${s.val}</div>
      <div class="sl">${s.label}</div></div>`).join('');
  document.getElementById('m-eyebrow-p').style.color=neon;
  document.getElementById('motm-ring-a').style.background=`conic-gradient(${neon} 0deg,rgba(${nr},0.4) 120deg,transparent 180deg,${neon} 360deg)`;
  document.getElementById('motm-ring-b').style.background=bg;
  document.getElementById('motm-num-badge').style.background=neon;document.getElementById('motm-num-badge').style.color=bg;document.getElementById('motm-num-badge').style.borderColor=bg;
  document.getElementById('m-pos-chip').style.cssText=`background:${soft};border:1px solid rgba(${nr},0.3);color:${neon};font-family:'Orbitron',sans-serif;font-size:0.5rem;letter-spacing:3px;padding:4px 12px;border-radius:4px;margin-top:4px;`;
  document.getElementById('m-rval-p').style.color=neon;
  document.getElementById('m-rfill-p').style.background=`linear-gradient(90deg,rgba(${nr},0.6),${neon})`;
}

function updateWatermark(){setText('p-watermark',v('watermark-text'));}

async function downloadImage(){
  const btn=document.querySelector('.btn-download');btn.textContent='‚è≥ G√âN√âRATION...';btn.disabled=true;
  try{
    const frame=document.getElementById('preview-frame');
    const canvas=await html2canvas(frame,{scale:3,useCORS:true,allowTaint:true,backgroundColor:null,logging:false});
    const link=document.createElement('a');
    link.download=`FootPack_${currentSlide}_${currentFormat}_${Date.now()}.png`;
    link.href=canvas.toDataURL('image/png');link.click();
  }catch(e){alert('Erreur de t√©l√©chargement.');console.error(e);}
  btn.textContent='‚¨á T√âL√âCHARGER';btn.disabled=false;
}

function v(id){return document.getElementById(id)?.value||'';}
function setText(id,txt){const el=document.getElementById(id);if(el)el.textContent=txt;}
</script>
</body>
</html>
